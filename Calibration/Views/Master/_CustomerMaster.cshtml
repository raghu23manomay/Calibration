
@{
    /**/

    Layout = null;
}
@model  IEnumerable<Calibration.Models.CustomerList>
@using PagedList;
@using PagedList.Mvc;
@using GridMvc.Html


@using (Html.BeginForm(null, null, FormMethod.Get, new { @name = "CustomFilter", @id = "CustomFilter", @class = "form-inline" }))
{
    <div class="loader"></div>
    <div style="overflow-x: auto;height: 440px;">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th></th>
                    <th scope="col">Customer    <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    @*<th scope="col">Address          <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    <th scope="col">City             <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    @*<th scope="col">Pincode          <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    <th scope="col">Salutation       <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    <th scope="col">Contact   <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    <th scope="col">Mobile        <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    @*<th scope="col">STD_Code         <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    <th scope="col">Telephone     <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    @*<th scope="col">Fax              <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    @*<th scope="col">Email_ID         <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    <th scope="col">Vendor Code      <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    @*<th scope="col">Remarks          <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    @*<th scope="col">Customer_ID      <i class="fa fa-angle-down" aria-hidden="true"></i></th>*@
                    <th scope="col">Code    <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                    <th scope="col">GST_Number       <i class="fa fa-angle-down" aria-hidden="true"></i></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td> <input class="form-check-input mycheck" type="checkbox" id="one"></td>
                        @*<td>
                                  <div class="form-check height20Pixel">
                                      <input class="form-check-input" type="checkbox" id="one">
                                      <label class="form-check-label verticalAlignTop" for="one"> &nbsp;@item.Customer_Name</label>
                                  </div>
                            </td>*@
                        <td style="width: 265px;">@item.Customer_Name</td>
                        @*<td>@item.Address</td>*@
                        <td>@item.City</td>
                        @*<td>@item.Pincode</td>*@
                        <td>@item.Salutation</td>
                        <td>@item.Contact_Person</td>
                        <td>@item.Mobile_No</td>
                        @*<td>@item.STD_Code</td>*@
                        <td>@item.Telephone_No</td>
                        @*<td>@item.Fax</td>*@
                        @*<td>@item.Email_ID</td>*@
                        <td>@item.Vendor_Code</td>
                        @*<td>@item.Remarks</td>*@
                        @*<td>@item.Customer_ID</td>*@
                        <td>@item.Customer_Code</td>
                        <td>@item.GST_Number</td>
                    </tr>
                }


            </tbody>
        </table>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <div class="pnl-pagination m-b-md1">
                <div class="pull-right">

                    @Html.PagedListPager((IPagedList)Model, page => Url.Action("Index", "Master", new { page }), PagedListRenderOptions.EnableUnobtrusiveAjaxReplacing(new PagedListRenderOptions() { MaximumPageNumbersToDisplay = 4, DisplayPageCountAndCurrentLocation = true }, new AjaxOptions() { HttpMethod = "POST", UpdateTargetId = "mgrid", OnComplete = "PagedOnComplete" }))
                    @if (Model.Count() == 0)
                    {
                        <ul class="pagination pull-right"></ul>
                    }
                </div>
            </div>
        </div>
    </div>

}

<script>
    $(document).ready(function () {

        $('.loader').hide();
        $('.option').hide();
        $('.mycheck').on('click', function () {
            if ($('.mycheck').is(':checked')) {
                $('.option').show();
                countcheckboxes()
            }
            else {
                $('.option').hide();
                countcheckboxes()
            }
        });

        $('#selectAll').on('click', function () {

            if ($('#selectAll').is(':checked')) {
                $('.mycheck').prop('checked', true);
                $('.option').show();
                countcheckboxes()
            }
            else {
                $('.mycheck').prop('checked', false);
                $('.option').hide();
                countcheckboxes()
            }
        });

         $('#mgrid .pagination li a').on('click', function (e) {
             e.preventDefault();
             e.stopImmediatePropagation();
             $('.loader').show();
             var temp = $(this).attr('href');
             
             var pageid = temp.replace('/Master/Index?page=', '');

             $.ajax({
                    url: "@Url.Action("LoadCustomerMaster", "Master")",
                    contentType: "application/json",
                    data: JSON.stringify( {
                        page: pageid,
                        CName: $('#CustomerFilter').val(),
                        //parseInt($(this).html()),
                    }),
                    dataType: "text",
                    type: "POST",
                    async: true,
                    success: function (data) {
                        $('#mgrid').html(data);
                        $('.loader').hide();
                    },
                    error: function (data) {
                    },
                    complete: function () {
                    }
                    });

                });
    });

    function countcheckboxes() {
        var count = $('input.mycheck:checked').length
        $('#count').html(count);
        if (count == 0) {
            $('#selectAll').prop('checked', false);
        }
    }
</script>